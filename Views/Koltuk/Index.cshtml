@model List<KTRS.Models.Koltuk>

@{
    ViewData["Title"] = "Koltuk Düzeni";
    int katNo = ViewBag.KatNo;
    int maxRow = ViewBag.MaxRow;
    int maxCol = ViewBag.MaxCol;
}

<h2>Kat: @katNo Koltuk Düzeni (@maxRow x @maxCol)</h2>

<p>
    <!-- Kat düzenini (maxRow, maxCol) düzenlemek için link -->
    <a asp-action="EditDuzeni" asp-route-katNo="@katNo">Kat Düzeni Ayarları</a>
</p>

<!-- Çift döngü ile grid -->
@for (int row = 0; row < maxRow; row++)
{
    <div style="display:flex;">
        @for (int col = 0; col < maxCol; col++)
        {
            // Koltuk var mı?
            var koltuk = Model.FirstOrDefault(k => k.RowIndex == row &&
            k.ColumnIndex == col &&
            k.KatNo == katNo);

            if (koltuk != null)
            {
                var bgColor = koltuk.Durum ? "lightblue" : "red";

                <div style="width:80px; height:80px; margin:2px; text-align:center; background-color:@bgColor;">
                    <!-- Koltuk No veya Id gösterilebilir -->
                    <div>@koltuk.koltukNo</div>
                    <a asp-action="Edit" asp-route-id="@koltuk.Id">Düzenle</a> |
                    <a asp-action="Delete" asp-route-id="@koltuk.Id">Sil</a>
                </div>
            }
            else
            {
                <div style="width:80px; height:80px; margin:2px; background-color:#ccc; text-align:center;">
                    <p>Boş</p>
                    <a asp-action="Create" asp-route-row="@row" asp-route-col="@col" asp-route-katNo="@katNo">Ekle</a>
                </div>
            }
        }
    </div>
}
